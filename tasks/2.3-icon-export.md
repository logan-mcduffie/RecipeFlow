# Task 2.3: Item Icon & Metadata Export System

**Phase**: 2 - Companion Mod Development
**Status**: Not Started

## Summary

Export item icons as images and extract item metadata (display names, tooltips) for the web app.

## Why This Matters

The web app needs:
1. **Icons**: Accurate item sprites that match what players see in-game
2. **Display names**: "Sodium Hydroxide Dust" instead of `gtceu:sodium_hydroxide_dust`
3. **Tooltips**: Chemical formulas, melting points, and other in-game tooltip info

## Inputs/Outputs

- **Input**: Item registry, all unique items referenced in recipes
- **Output**:
  - PNG (static) or APNG/WebP (animated) for each unique item
  - Item metadata JSON (display names + tooltips)

## Technical Notes

### Icon Export

**Process for each item**:
1. Check if texture is animated (has `.mcmeta` or multiple frames)
2. Static items: render inventory sprite → PNG
3. Animated items: render each animation frame → APNG or WebP (animated)

**Special cases**:
- **Enchantment glint**: capture multiple frames of the glint overlay animation
- **3D blocks**: render standard inventory isometric view
- **Fluids**: capture flowing animation frames

**Output format**: `{itemId_with_underscores}.png` or `.webp`
- Example: `gtceu_sodium_hydroxide_dust.png`

**Implementation approach**:
```java
ItemStack stack = ...;
TextureAtlasSprite sprite = getSprite(stack);

if (sprite.getFrameCount() > 1) {
    // Animated - capture all frames
    List<BufferedImage> frames = new ArrayList<>();
    for (int i = 0; i < sprite.getFrameCount(); i++) {
        frames.add(renderFrame(stack, i));
    }
    saveAsAnimated(itemId, frames, sprite.getFrameTime());
} else {
    // Static - single image
    saveAsPNG(itemId, renderFrame(stack, 0));
}
```

### Item Metadata Export

**For each unique item, extract**:

| Field | Type | Source |
|-------|------|--------|
| `itemId` | string | Registry name (e.g., `gtceu:sodium_hydroxide_dust`) |
| `displayName` | string | `ItemStack.getHoverName().getString()` |
| `tooltip` | string[] | `ItemStack.getTooltipLines()` |

**Metadata JSON structure**:
```json
{
  "items": [
    {
      "itemId": "gtceu:sodium_hydroxide_dust",
      "displayName": "Sodium Hydroxide Dust",
      "tooltip": [
        "Chemical Formula: NaOH",
        "Melting Point: 596K"
      ]
    },
    {
      "itemId": "minecraft:iron_ingot",
      "displayName": "Iron Ingot",
      "tooltip": []
    }
  ]
}
```

**Important**: Tooltips should be captured as they appear in-game (with color codes stripped or converted).

### Batch Processing

- Could be 5,000+ unique items for large modpacks
- Provide progress feedback during export
- Consider memory management for large icon sets

## Files to Touch

- `mod/core/export/IconExporter.java`
- `mod/core/export/ItemMetadataExporter.java`
- `mod/core/AnimatedIconRenderer.java`
- `mod/core/model/ItemMetadata.java`

## Acceptance Criteria

- [ ] Static items export as PNG
- [ ] Animated items export with animation preserved (APNG or WebP)
- [ ] Enchantment glint captured for enchanted items
- [ ] Block items render correctly (isometric view)
- [ ] **Display names extracted for all items**
- [ ] **Tooltips extracted for all items**
- [ ] Item metadata JSON generated
- [ ] Progress feedback during export
- [ ] Handles 5,000+ items without memory issues

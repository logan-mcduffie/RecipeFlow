# Task 6.1: Save/Load Flowcharts

**Phase**: 6 - Flowchart Persistence & Sharing
**Status**: Not Started

## Summary

Save flowcharts to database and load them back.

## Why This Matters

Users need to save their work and return to it later.

## Inputs/Outputs

- **Input**: Flowchart state (nodes, edges, config)
- **Output**: Persisted flowchart, load functionality

## Technical Notes

**API endpoints**:
- `POST /api/flowcharts` - create new flowchart
- `PUT /api/flowcharts/:id` - update existing
- `GET /api/flowcharts/:id` - load flowchart
- `GET /api/users/me/flowcharts` - list user's flowcharts
- `DELETE /api/flowcharts/:id` - delete flowchart

**Flowchart data structure**:
```json
{
  "id": "uuid",
  "name": "Steel Processing Chain",
  "modpackId": "star-technology",
  "modpackVersion": "1.2.3",
  "userId": "uuid",
  "isPublic": false,
  "data": {
    "nodes": [...],
    "edges": [...],
    "viewport": { "x": 0, "y": 0, "zoom": 1 }
  },
  "createdAt": "...",
  "updatedAt": "..."
}
```

**Auto-save**:
- Debounced save (2 second delay after changes)
- Visual indicator: "Saving..." → "Saved ✓"
- Handle offline/errors gracefully

**Manual save**:
- Save button in toolbar
- Keyboard shortcut: Ctrl+S

**Load interface**:
- "My Flowcharts" page/modal
- List with name, modpack, last modified
- Search/filter
- Click to load, confirm if unsaved changes

## Files to Touch

- `packages/api/src/routes/flowcharts.ts`
- `packages/api/src/services/flowchartService.ts`
- `packages/web/src/api/flowcharts.ts`
- `packages/web/src/editor/hooks/useAutoSave.ts`
- `packages/web/src/pages/MyFlowcharts.tsx`

## Acceptance Criteria

- [ ] Flowchart saves to database
- [ ] Auto-save works with debouncing
- [ ] Save indicator shows status
- [ ] Load restores full state (nodes, edges, configs)
- [ ] User can see list of their flowcharts
- [ ] Delete flowchart works
- [ ] Handles save conflicts gracefully
- [ ] Ctrl+S keyboard shortcut works

# Task 4.2: Authentication Flow

**Phase**: 4 - Flowchart Editor Frontend
**Status**: Not Started

## Summary

Implement OAuth login and session management in frontend.

## Why This Matters

Users need to log in to save and share flowcharts.

## Inputs/Outputs

- **Input**: OAuth provider configs
- **Output**: Working login/logout flow

## Technical Notes

**OAuth redirect flow**:
1. User clicks "Login with Discord/GitHub/Google"
2. Redirect to `/api/auth/:provider`
3. API redirects to OAuth provider
4. Provider redirects back to `/callback`
5. API exchanges code for token, creates session
6. Redirect to app with session cookie

**Session management**:
- Store JWT in httpOnly cookie (preferred) or memory
- Refresh token flow for extended sessions
- Auth context for React components

**Protected routes**:
- Wrapper component checks auth state
- Redirects to login if not authenticated
- Preserves intended destination

**User display**:
- Avatar + username in header
- Dropdown menu: My Flowcharts, Settings, Logout

## Files to Touch

- `packages/web/src/auth/*`
- `packages/web/src/contexts/AuthContext.tsx`
- `packages/web/src/components/ProtectedRoute.tsx`
- `packages/web/src/components/UserMenu.tsx`

## Acceptance Criteria

- [ ] Login redirects to OAuth provider
- [ ] Callback handles token exchange
- [ ] User state persists across refresh
- [ ] Logout clears session
- [ ] Protected routes redirect to login
- [ ] User profile displays in header

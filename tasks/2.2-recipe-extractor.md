# Task 2.2: Recipe Extractor Implementation (1.19+)

**Phase**: 2 - Companion Mod Development
**Status**: Not Started

## Summary

Implement recipe extraction for modern Minecraft (EMI/JEI).

## Why This Matters

Start with modern version (Star Technology on 1.20.1), then backport to other versions.

## Inputs/Outputs

- **Input**: EMI/JEI API
- **Output**: Recipe extraction working

## Technical Notes

- Hook into EMI's recipe registry
- Extract: inputs, outputs, machine type
- For GregTech: EU/t, duration, **circuit** (1-32), tier, special conditions
- Serialize to portable JSON format
- Keep extraction logic simple and focused

**Recipe data structure (vanilla)**:
```json
{
  "id": "minecraft:crafting/iron_ingot_from_block",
  "type": "minecraft:crafting_shapeless",
  "sourceMod": "minecraft",
  "ingredients": [{"itemId": "minecraft:iron_block", "count": 1}],
  "output": {"itemId": "minecraft:iron_ingot", "count": 9}
}
```

**Recipe data structure (GregTech)**:
```json
{
  "id": "gtceu:chemical_reactor/sodium_hydroxide",
  "type": "gregtech:machine",
  "sourceMod": "gtceu",
  "machineType": "chemical_reactor",
  "voltageTier": "LV",
  "euPerTick": 30,
  "duration": 100,
  "circuit": 1,
  "inputs": {
    "items": [{"itemId": "gtceu:sodium_dust", "count": 1}],
    "fluids": [{"fluidId": "minecraft:water", "amount": 1000}]
  },
  "outputs": {
    "items": [
      {"itemId": "gtceu:sodium_hydroxide_dust", "count": 1, "chance": null}
    ],
    "fluids": [{"fluidId": "gtceu:hydrogen", "amount": 1000}]
  },
  "specialConditions": {
    "cleanroom": false,
    "vacuum": false
  }
}
```

**Circuit field**: Critical for GregTech recipes. Many recipes share identical inputs/outputs but differ only by programmed circuit number (1-32). Extract from the circuit slot input item's NBT data.

**Chanced outputs**: For GT recipes with probability-based outputs, include:
- `chance`: 0-1 (null = 100%)
- `boostPerTier`: bonus chance per voltage tier overclock

## Files to Touch

- `mod/forge-1.20.1/` (renamed from v119plus)
- `mod/core/model/GregTechRecipeData.java`
- `mod/core/model/VanillaRecipeData.java`
- `mod/core/api/RecipeData.java`

## Acceptance Criteria

- [ ] Can enumerate all recipes from EMI registry
- [ ] GregTech metadata captured (EU/t, duration, tier)
- [ ] **Circuit number extracted for GT recipes (1-32)**
- [ ] Chanced outputs include chance and boostPerTier
- [ ] Special conditions captured (cleanroom, vacuum, coil tier)
- [ ] JSON output matches API contract
- [ ] Handles crafting, smelting, and GT machine recipes
